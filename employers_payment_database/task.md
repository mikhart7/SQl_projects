Все в мире пользуются новыми банковскими картами, информацию в которых может менять бухгалтерия любой фирмы. У каждой фирмы есть один руководитель, и сотрудники каждой фирмы периодически получают заработную плату (в случае чего бухгалтерия обновляет их баланс в банке). Иногда сотрудники портят имущество, и с их баланса списывается соответствующая сумма (в случае чего бухгалтерия также обновляет их баланс в банке). У сотрудников есть рейтинг надёжности, который отражает их готовность к ведению бизнеса и позволяет им самим становится руководителями в случае получения достаточного количества рейтинга

Постройте базу данных, обеспечивающую выполнение следующих условий:

При получении работниками заработной платы или изъятии у них денег в случае порчи имущества соответствующее количество денег должно списываться или добавляться в строке баланса руководителя фирмы. Если бы баланс аккаунта руководителя стал отрицательным, выдача зарплат (обновление одного или нескольких полей баланс у сотрудников сразу) не производится. Если бы баланс сотрудника стал отрицательным (в случае порчи имущества), то вместо этого весь баланс сотрудника переводится руководителю, а остальной списывается с его рейтинга надёжности по формуле НЕВЫПЛАЧЕННЫЕ_ИЗДЕРЖКИ / 10

При каждой проведённой операции (добавление, удаление) в случае, если баланс поменялся, рейтинг надёжности аккаунта должен увеличиваться на 10.

Каждая операция выплаты зарплаты сотруднику или изъятия у него денег должна заносится в таблицу с соответствующим статусом (успешна ли операция или отклонена), суммой операции, датой, когда она была произведена, датой записи в таблицу и датой предыдущего изменения (на случай, если операция будет ошибочна и бухгалтеру придётся вручную менять данные в таблице истории операций выплат и изъятий у сотрудников), а также прочей сопуствующей информацией (указано в разделе таблиц)

Когда сотрудник переходит границу в 100 надёжности, он перестаёт быть сотрудником фирмы, открывает свою фирму и становится руководителем этой фирмы

Когда появляется новый сотрудник, он автоматически попадает в фирму с самым низким суммарным уровнем надёжности сотрудников, а если таких несколько, то в самую новую из фирм с таким уровнем надёжности. Его стартовая надёжность не может превышать 20, а если она превышает это значение, то устанавливается на 20.

Когда появляется (не являвшийся до этого сотрудником) новый босс (руководитель), ему выдаётся новая фирма, его надёжность повышается до 250 (если она была меньше 250), а его баланс повышается до 10000 (если при попытки добавления он был указан ниже 10000).

Босс не является сотрудником фирмы.

Добавьте таблицы:

PEOPLE (id, name, isBoss, firmID, balance, rating)
FIRM (id)
EMPLOYEE_MONEY_TRAIL (id, personID, money, action, status, errorDescription, ratingAfterOperation, date, created_at, updated_at)
Предоставьте (после определения всех необходимых таблиц, триггеров, индексов и прочих элементов базы данных) набор добавлений и изменений данных, который бы содержал следующие события:

Как минимум одно добавление сотрудника (на каждый пункт), когда он бы:

Добавился в самую новую фирму
Добавился бы в самую древнюю фирму
Добавился бы не туда, куда пытался
Добавился в одну из фирм с одинаковым суммарным рейтингом
Добавился бы с меньшим уровнем надёжности, чем заявлял при добавлении
Как минимум одна запись в истории финансовых транзакций (на каждый пункт), которая бы:

Успешно обработалась
Была бы частично отменена из-за недостаточного баланса (в таком случае в таблице должна быть ещё одна запись- уже об успешной, частичной транзакции)
Была бы полностью отменена из-за недостаточного баланса руководителя
Сделала бы сотрудника руководителем (что должно вызвать изменение его фирмы и должности)
Была затем обновлена вручную (что автоматически меняет updated_at)
Как минимум одно добавление руководителя (под добавлением подразумевается появление нового человека в базе данных, а не получение сотрудником высокого рейтинга)
